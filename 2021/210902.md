# Taro 3 æ–‡æ¡£å­¦ä¹ 

[toc]

## ç›®æ ‡

- [x] äº†è§£ Taro æŠ€æœ¯æ¡†æ¶
- [x] Taro 3.x æ¸è¿›å¼å…¥é—¨æ•™ç¨‹
  - [x] ç¯å¢ƒå‡†å¤‡
  - [x] åŸºç¡€æ•™ç¨‹
  - [x] é¡¹ç›®è¿›é˜¶ä¸ä¼˜åŒ–
  - [x] å¤šç«¯å¼€å‘
- [ ] Taro 3.x æ–‡æ¡£
  - [x] å¿«é€Ÿå¼€å§‹
  - [ ] åŸºç¡€æ•™ç¨‹
  - [ ] è¿›é˜¶æŒ‡å—
  - [ ] ç¤¾åŒºç”Ÿæ€

## èµ„æº

æ–‡æ¡£å­¦ä¹ ï¼š

- [Taro ä»‹ç» \| Taro æ–‡æ¡£](https://docs.taro.zone/docs/README)
- [æ¸è¿›å¼å…¥é—¨æ•™ç¨‹ \| Taro æ–‡æ¡£](https://docs.taro.zone/docs/guide)

## è¾“å‡º 1ï¼šTaro 3.x æ¸è¿›å¼å…¥é—¨æ•™ç¨‹

### ç¯å¢ƒå‡†å¤‡

- [x] å®‰è£… Node.js V12
- [x] å®‰è£… Taro CLI 

ç›®å‰ Taro ä»…æä¾›ä¸€ç§å¼€å‘æ–¹å¼ï¼šå®‰è£… Taro å‘½åè¡Œå·¥å…·ï¼ˆTaro CLIï¼‰è¿›è¡Œå¼€å‘ã€‚

Taro CLI ä¾èµ– Node.js ç¯å¢ƒï¼Œæ¨èå®‰è£… LTS ç‰ˆæœ¬ **V12**ã€‚

å®‰è£… Taro CLIï¼š

```sh
npm i -g @tarojs/cli
```

éªŒè¯å®‰è£…æˆåŠŸï¼š

![Xnip2021-09-30_15-54-24](https://tva1.sinaimg.cn/large/008i3skNgy1guypineqw7j60bl07naa202.jpg)

### åŸºç¡€æ•™ç¨‹

#### é¡¹ç›®åˆå§‹åŒ–

ä½¿ç”¨ `taro -help` æŸ¥åˆ°åˆå§‹åŒ–é¡¹ç›®å‘½ä»¤ï¼š

```sh
# åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›® HelloTaro
taro init HelloTaro
```

![Xnip2021-09-30_16-01-58](https://tva1.sinaimg.cn/large/008i3skNly1guyprsxvp4j60nn0jxacy02.jpg)

å®‰è£…æˆåŠŸï¼š

![Xnip2021-09-30_16-06-30.png](https://tva1.sinaimg.cn/large/008i3skNgy1guypvj4f6lj60lw0bfjss02.jpg)

æ‰“å¼€é¡¹ç›®ï¼š

![Xnip2021-09-30_16-13-30](https://tva1.sinaimg.cn/large/008i3skNgy1guyq3f7xgxj60x10mn77p02.jpg)

```sh
â”œâ”€â”€ babel.config.js             # Babel é…ç½®
â”œâ”€â”€ .eslintrc.js                # ESLint é…ç½®
â”œâ”€â”€ config                      # ç¼–è¯‘é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ dev.js                  # å¼€å‘æ¨¡å¼é…ç½®
â”‚   â”œâ”€â”€ index.js                # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ prod.js                 # ç”Ÿäº§æ¨¡å¼é…ç½®
â”œâ”€â”€ package.json                # Node.js manifest
â”œâ”€â”€ dist                        # æ‰“åŒ…ç›®å½•
â”œâ”€â”€ project.config.json         # å°ç¨‹åºé¡¹ç›®é…ç½®
â”œâ”€â”€ src # æºç ç›®å½•
â”‚   â”œâ”€â”€ app.config.js           # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ app.css                 # å…¨å±€ CSS
â”‚   â”œâ”€â”€ app.js                  # å…¥å£ç»„ä»¶
â”‚   â”œâ”€â”€ index.html              # H5 å…¥å£ HTML
â”‚   â””â”€â”€ pages                   # é¡µé¢ç»„ä»¶
â”‚       â””â”€â”€ index
â”‚           â”œâ”€â”€ index.config.js # é¡µé¢é…ç½®
â”‚           â”œâ”€â”€ index.css       # é¡µé¢ CSS
â”‚           â””â”€â”€ index.jsx       # é¡µé¢ç»„ä»¶ï¼Œå¦‚æœæ˜¯ Vue é¡¹ç›®ï¼Œæ­¤æ–‡ä»¶ä¸º index.vue
```

#### è¿è¡Œé¡¹ç›®

```json
"scripts": {
    "build:weapp": "taro build --type weapp",
    "build:swan": "taro build --type swan",
    "build:alipay": "taro build --type alipay",
    "build:tt": "taro build --type tt",
    "build:h5": "taro build --type h5",
    "build:rn": "taro build --type rn",
    "build:qq": "taro build --type qq",
    "build:quickapp": "taro build --type quickapp",
    "dev:weapp": "npm run build:weapp -- --watch",
    "dev:swan": "npm run build:swan -- --watch",
    "dev:alipay": "npm run build:alipay -- --watch",
    "dev:tt": "npm run build:tt -- --watch",
    "dev:h5": "npm run build:h5 -- --watch",
    "dev:rn": "npm run build:rn -- --watch",
    "dev:qq": "npm run build:qq -- --watch",
    "dev:quickapp": "npm run build:quickapp -- --watch"
},
```

æ‰§è¡Œ `dev:h5`ï¼Œé¡¹ç›®æˆåŠŸè¿è¡Œï¼š

![Xnip2021-09-30_16-34-57](https://tva1.sinaimg.cn/large/008i3skNly1guyqp179buj60at0gzmxa02.jpg)

#### å…¥å£ç»„ä»¶

> Taro çš„å…¥å£ç»„ä»¶å’Œå…¨å±€é…ç½®è§„èŒƒæ˜¯åŸºäºå¾®ä¿¡å°ç¨‹åºè€Œåˆ¶å®šçš„ï¼Œå¹¶å¯¹å…¨å¹³å°è¿›è¡Œç»Ÿä¸€ã€‚

æ¯ä¸€ä¸ª Taro é¡¹ç›®éƒ½æœ‰ä¸€ä¸ªå…¥å£ç»„ä»¶å’Œä¸€ä¸ªå…¥å£é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¥å£ç»„ä»¶ä¸­è®¾ç½®å…¨å±€çŠ¶æ€/å…¨å±€ç”Ÿå‘½å‘¨æœŸã€‚

æ¯ä¸€ä¸ªå…¥å£ç»„ä»¶ï¼ˆä¾‹å¦‚ `app.js`ï¼‰æ€»æ˜¯ä¼´éšä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ `app.config.js`ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­è®¾ç½®é¡µé¢ç»„ä»¶çš„è·¯å¾„ã€å…¨å±€çª—å£ã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚

`app.js`

```ts
import Vue from 'vue'
import './app.css'

const App = {
  render(h) {
    // this.$slots.default æ˜¯å°†è¦ä¼šæ¸²æŸ“çš„é¡µé¢
    return h('block', this.$slots.default)
  }
}

export default App
```

`app.config.js`

```ts
export default {
  pages: [
    'pages/index/index'
  ]
}
```

#### é¡µé¢ç»„ä»¶

é¡µé¢ç»„ä»¶æ˜¯æ¯ä¸€é¡¹è·¯ç”±å°†ä¼šæ¸²æŸ“çš„é¡µé¢ï¼ŒTaro çš„é¡µé¢é»˜è®¤æ”¾åœ¨ `src/pages` ä¸­ï¼Œæ¯ä¸€ä¸ª Taro é¡¹ç›®è‡³å°‘æœ‰ä¸€ä¸ªé¡µé¢ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬ç”Ÿæˆçš„é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªé¡µé¢ç»„ä»¶ï¼š`src/pages/index/index`ï¼Œå¯¹åº”çš„å°±æ˜¯å…¨å±€é…ç½®æ–‡ä»¶ `app.config.ts` ä¸­ `pages` å­—æ®µå½“ä¸­çš„å€¼ã€‚

ä¸€ä¸ªç®€å•çš„é¡µé¢ç»„ä»¶å¦‚ä¸‹ï¼š

```html
<template>
  <view>
    {{ msg }}
  </view>
</template>

<script>

export default {
  data() {
    return {
      msg: 'Hello World!'
    };
  },
  onReady () {
    console.log('onReady')
  }
};
</script>
```

> æ³¨ï¼šæ‰“å¼€ `.vue` æ–‡ä»¶ vscode ä¼šæç¤ºå®‰è£… `Vetur` æ’ä»¶ï¼š
> ![Xnip2021-09-30_16-55-23](https://tva1.sinaimg.cn/large/008i3skNly1guyr9u3i8xj60s80a2q3k02.jpg)

#### è‡ªå®šä¹‰ç»„ä»¶

å‡å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªé¦–é¡µï¼Œå…¶åŠŸèƒ½æ˜¯æŠŠè®ºå›æœ€æ–°çš„å¸–å­å±•ç¤ºå‡ºæ¥ï¼š

`src/pages/index/index.vue`

```html
<template>
  <view class='index'>
    <thread-list
      :threads="threads"
      :loading="loading"
    />
  </view>
</template>

<script>
import Vue from 'vue'
import Taro from '@tarojs/taro'
import api from '../../utils/api'
import ThreadList from '../../components/thread_list.vue'

export default {
  components: {
    'thread-list': ThreadList
  },

  data () {
    return {
      loading: true,
      threads: []
    }
  },

  async created() {
    try {
      const res = await Taro.request({
        url: api.getLatestTopic()
      })
      this.loading = false
      this.threads = res.data
    } catch (error) {
      Taro.showToast({
        title: 'è½½å…¥è¿œç¨‹æ•°æ®é”™è¯¯'
      })
    }
  }
}
</script>
```

`src/components/thread_list.vue`

```html
<template>
  <view className='thread-list'>
    <loading v-if="loading" />
    <thread
      v-else
      v-for="t in threads"
      :key="t.id"
      :node="t.node"
      :title="t.title"
      :last_modified="t.last_modified"
      :replies="t.replies"
      :tid="t.id"
      :member="t.member"
    />
  </view>
</template>

<script >
import Vue from 'vue'
import Loading from './loading.vue'
import Thread from './thread.vue'
export default {
  components: {
    'loading': Loading,
    'thread': Thread
  },
  props: {
    threads: {
      type: Array,
      default: []
    },
    loading: {
      type: Boolean,
      default: true
    }
  }
}
</script>
```

`src/components/thread.vue`

```html
<template>
  <view class='thread' @tap="handleNavigate">
    <view class='info'>
      <view>
        <image :src="member.avatar_large | url" class='avatar' />
      </view>
      <view class='middle'>
        <view :class="usernameCls">
            {{member.username}}
        </view>
        <view class='replies'>
          <text class='mr10'>{{time}}</text>
          <text>è¯„è®º {{replies}}</text>
        </view>
      </view>
      <view class='node'>
        <text class='tag'>{{node.title}}</Text>
      </view>
    </view>
    <text class='title'>{{title}}</text>
  </view>
</template>

<script>
import Vue from 'vue'
import { eventCenter } from '@tarojs/taro'
import Taro from '@tarojs/taro'
import { timeagoInst, Thread_DETAIL_NAVIGATE } from '../utils'
import './thread.css'
export default {
  props: ['title', 'member', 'last_modified', 'replies', 'node', 'not_navi', 'tid'],
  computed: {
    time () {
      return timeagoInst.format(this.last_modified * 1000, 'zh')
    },
    usernameCls () {
      return `author ${this.not_navi ? 'bold' : ''}`
    }
  },
  filters: {
    url (val) {
      return 'https:' + val
    }
  },
  methods: {
    handleNavigate () {
      const { tid, not_navi } = this.$props
      if (not_navi) {
        return
      }
      eventCenter.trigger(Thread_DETAIL_NAVIGATE, this.$props)
      // è·³è½¬åˆ°å¸–å­è¯¦æƒ…
      Taro.navigateTo({
        url: '/pages/thread_detail/thread_detail'
      })
    }
  }
}
</script>
```

æ€»ç»“ï¼š

```
- index.vue
    - thread_list.vue
        - threadd.vue
```

è¯´æ˜ï¼š

1. Taro åº”ç”¨ä¸­å‘é€è¯·æ±‚æ˜¯ `Taro.request()`ã€‚ å’Œé¡µé¢é…ç½®ã€å…¨å±€é…ç½®ä¸€æ ·ï¼ŒTaro çš„ API è§„èŒƒä¹Ÿæ˜¯åŸºäº **å¾®ä¿¡å°ç¨‹åº** è€Œåˆ¶å®šçš„ï¼Œå¹¶å¯¹å…¨å¹³å°è¿›è¡Œç»Ÿä¸€ã€‚ ä½ å¯ä»¥é€šè¿‡åœ¨ API æ–‡æ¡£ æ‰¾åˆ°æ‰€æœ‰ APIã€‚ğŸ‘‰ [API è¯´æ˜ \| Taro æ–‡æ¡£](https://docs.taro.zone/docs/apis/about/desc)
2. Taro æ–‡æ¡£çš„è·¨å¹³å°ç»„ä»¶åº“ åŒ…å«äº†æ‰€æœ‰ç»„ä»¶å‚æ•°å’Œç”¨æ³•ã€‚ä½†ç›®å‰ç»„ä»¶åº“æ–‡æ¡£ä¸­çš„å‚æ•°å’Œç»„ä»¶åéƒ½æ˜¯é’ˆå¯¹ React çš„ï¼ˆé™¤äº† React çš„ç‚¹å‡»äº‹ä»¶æ˜¯ onClick ä¹‹å¤–ï¼‰ã€‚ å¯¹äº Vue è€Œè¨€ï¼Œç»„ä»¶åå’Œç»„ä»¶å‚æ•°éƒ½é‡‡ç”¨çŸ­æ¨ªçº¿é£æ ¼ï¼ˆkebab-caseï¼‰çš„å‘½åæ–¹å¼ï¼ˆå¦‚ï¼š`<picker-view indicator-class="myclass" />`ã€‚ğŸ‘‰ [ç»„ä»¶åº“è¯´æ˜ \| Taro æ–‡æ¡£](https://docs.taro.zone/docs/components-desc)

#### è·¯ç”±ä¸ Tabbar

å®ç°è·¯ç”±è·³è½¬ï¼š

```js
Taro.navigateTo({ url: '/pages/thread_detail/thread_detail' })
```

### é¡¹ç›®è¿›é˜¶ä¸ä¼˜åŒ–

#### çŠ¶æ€ç®¡ç†

â€œä¸€æ—¦æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘å˜å¾—å¤æ‚ï¼Œä¸€ä¸ªç®€å•çš„å‘å¸ƒè®¢é˜…æœºåˆ¶ç»‘å®šåˆ°ä¸€ä¸ªå…¨å±€çš„ state å¯èƒ½å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„æ•°æ®æµå˜å¾—éš¾ä»¥è¿½è¸ªâ€ã€‚

è¿™æ—¶å¯ä»¥ä½¿ç”¨ç¤¾åŒºæœ€çƒ­é—¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼šRedux å’Œ Vuexï¼ˆå–å†³äºç”¨ä»€ä¹ˆæ¡†æ¶å¼€å‘ï¼‰ã€‚

#### CSS å·¥å…·

åœ¨ Taro ä¸­ä½¿ç”¨ CSS é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨éƒ½æ¯”è¾ƒç®€å•ï¼Œåªè¦åœ¨ç¼–è¯‘é…ç½®æ·»åŠ ç›¸å…³æ’ä»¶å³å¯ï¼š

```js
// config/index.js

const config = {
  // ...
  plugins: [
    '@tarojs/plugin-sass',  // ä½¿ç”¨ Sass
    // '@tarojs/plugin-less',  // ä½¿ç”¨ Less
    // '@tarojs/plugin-stylus',  // ä½¿ç”¨ Stylus
  ]
}
```

#### æ¸²æŸ“ HTML

Taro å†…ç½® HTML æ¸²æŸ“ï¼Œä½¿ç”¨æ–¹æ³•ä¸ React/Vue åœ¨ Web å¼€å‘æ²¡ä»€ä¹ˆåŒºåˆ«ï¼š

```html
<view v-html="reply.content_rendered | html" class='content' />
```

#### æ€§èƒ½ä¼˜åŒ–

å½“æˆ‘ä»¬çš„åˆ—è¡¨æ•°æ®éå¸¸åºå¤§ï¼Œæˆ–è€…åˆ—è¡¨æ¸²æŸ“çš„ DOM ç»“æ„å¼‚å¸¸å¤æ‚ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTaro å†…ç½®äº†è™šæ‹Ÿåˆ—è¡¨ï¼ˆ`VirtualList`ï¼‰åŠŸèƒ½ï¼Œæ¯”èµ·å…¨é‡æ¸²æŸ“æ‰€æœ‰åˆ—è¡¨æ•°æ®ï¼Œæˆ‘ä»¬åªéœ€è¦æ¸²æŸ“å½“å‰å¯è§†åŒºåŸŸï¼ˆ`visable viewport`ï¼‰è§†å›¾ï¼š

```js
// åœ¨å…¥å£æ–‡ä»¶æ–°å¢ä½¿ç”¨æ’ä»¶
import VirtualList from '@tarojs/components/virtual-list'
Vue.use(VirtualList)
```

#### æ‰“åŒ…ä½“ç§¯

é»˜è®¤è€Œè¨€ä½¿ç”¨ç”Ÿäº§æ¨¡å¼æ‰“åŒ…ï¼ŒTaro å°±ä¼šç»™ä½ ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ã€‚ä½†å€¼å¾—æ³¨æ„ï¼ŒTaro é»˜è®¤çš„æ‰“åŒ…é…ç½®æ˜¯ä¸ºäº†è®©å¤šæ•°é¡¹ç›®å’Œéœ€æ±‚éƒ½å¯ä»¥è¿è¡Œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ä»»ä½•é¡¹ç›®çš„æœ€ä¼˜é€‰æ‹©ã€‚å› æ­¤ä½ å¯ä»¥åœ¨ Taro é…ç½®çš„åŸºç¡€ä¹‹ä¸Šå†é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®è¿›è¡Œä¼˜åŒ–ã€‚

JSï¼š

1. å¦‚æœä¸éœ€è¦é«˜å…¼å®¹æ€§ï¼Œå¯ä»¥é…ç½® `babel.config.js` ç¼©å°æ‰“åŒ…ä½“ç§¯

æ‰“åŒ…ä½“ç§¯åˆ†æï¼š

1. å®‰è£…ä¾èµ– `webpack-bundle-analyzer`ï¼Œç„¶ååœ¨ `mini.webpackChain` æ·»åŠ é…ç½®

åˆ†åŒ…ï¼š

1. åœ¨ä¸€äº›æƒ…å†µï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„é¡µé¢åªæœ‰å½“ç”¨åˆ°æ—¶æ‰æŒ‰éœ€è¿›è¡ŒåŠ è½½ã€‚è¿™ç§æƒ…å†µåœ¨ Taro åº”ç”¨è¢«ç§°ä¸ºåˆ†åŒ…ï¼Œåˆ†åŒ…çš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦é€šè¿‡é…ç½®å…¥å£æ–‡ä»¶ `app.config.js` å³å¯

### è‡ªå®šä¹‰ç¼–è¯‘

åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ï¼ŒTaro è‡ªå¸¦çš„ç¼–è¯‘ç³»ç»Ÿæ²¡æœ‰åŠæ³•æ»¡è¶³æˆ‘ä»¬çš„ç¼–è¯‘éœ€æ±‚ï¼Œè¿™æ—¶ Taro æä¾›äº†ä¸¤ç§æ‹“å±•ç¼–è¯‘çš„æ–¹æ¡ˆï¼š

1. ä½¿ç”¨ Webpack è¿›è¡Œæ‹“å±•
2. ä½¿ç”¨æ’ä»¶åŒ–ç³»ç»Ÿè¿›è¡Œæ‹“å±•

### å¤šç«¯å¼€å‘

1. è·¨å¹³å°å¼€å‘
2. åŒæ­¥è°ƒè¯•
3. ä½¿ç”¨åŸç”Ÿå°ç¨‹åºç»„ä»¶

## è¾“å‡º 2ï¼šTaro 3.x æ–‡æ¡£

### å¿«é€Ÿå¼€å§‹

#### å®‰è£…

```sh
# ä½¿ç”¨ npm å®‰è£… CLI
$ npm install -g @tarojs/cli

# OR ä½¿ç”¨ yarn å®‰è£… CLI
$ yarn global add @tarojs/cli

# OR å®‰è£…äº† cnpmï¼Œä½¿ç”¨ cnpm å®‰è£… CLI
$ cnpm install -g @tarojs/cli


# æŸ¥çœ‹ Taro å…¨éƒ¨ç‰ˆæœ¬ä¿¡æ¯
npm info @tarojs/cli
```

æ³¨æ„ï¼š

1. node ç¯å¢ƒ >= 12.0.0

##### é¡¹ç›®åˆå§‹åŒ–

```sh
# ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡æ¿é¡¹ç›®
taro init myApp

# npm 5.2+ ä¹Ÿå¯åœ¨ä¸å…¨å±€å®‰è£…çš„æƒ…å†µä¸‹ä½¿ç”¨ npx åˆ›å»ºæ¨¡æ¿é¡¹ç›®
npx @tarojs/cli init myApp
```

##### ç¼–è¯‘è¿è¡Œ

Taro ç¼–è¯‘åˆ†ä¸º dev å’Œ build æ¨¡å¼ï¼š

1. dev æ¨¡å¼ï¼ˆå¢åŠ  --watch å‚æ•°ï¼‰ å°†ä¼šç›‘å¬æ–‡ä»¶ä¿®æ”¹
2. build æ¨¡å¼ï¼ˆå»æ‰ --watch å‚æ•°ï¼‰ å°†ä¸ä¼šç›‘å¬æ–‡ä»¶ä¿®æ”¹ï¼Œå¹¶ä¼šå¯¹ä»£ç è¿›è¡Œå‹ç¼©æ‰“åŒ…ã€‚
3. dev æ¨¡å¼ç”Ÿæˆçš„æ–‡ä»¶è¾ƒå¤§ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ `NODE_ENV` ä¸º `production` å¯ä»¥å¼€å¯å‹ç¼©ï¼Œæ–¹ä¾¿é¢„è§ˆï¼Œä½†ç¼–è¯‘é€Ÿåº¦ä¼šä¸‹é™

å¾®ä¿¡å°ç¨‹åºï¼š

1. é€‰æ‹©é¡¹ç›®çš„ dist ç›®å½•å¯¼å…¥åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ä¿®æ”¹å¼€å‘è€…å·¥å…·çš„é¡¹ç›®è®¾ç½®ï¼š
   1. è®¾ç½®å…³é—­ ES6 è½¬ ES5 åŠŸèƒ½ï¼Œå¼€å¯å¯èƒ½æŠ¥é”™
   2. è®¾ç½®å…³é—­ä¸Šä¼ ä»£ç æ—¶æ ·å¼è‡ªåŠ¨è¡¥å…¨ï¼Œå¼€å¯å¯èƒ½æŠ¥é”™
   3. è®¾ç½®å…³é—­ä»£ç å‹ç¼©ä¸Šä¼ ï¼Œå¼€å¯å¯èƒ½æŠ¥é”™

ä¼å¾®å°ç¨‹åºï¼š

1. Taro v3.1+ å¼€å§‹æ”¯æŒ
2. éœ€è¦å®‰è£… Taro æ’ä»¶
3. å…¶å®ƒè®¾ç½®åŒå¾®ä¿¡å°ç¨‹åº

ä¼ é€é—¨ï¼š[ä½¿ç”¨ Taro + NutUI å¼€å‘ä¼å¾®å°ç¨‹åº](./211002.md)

### åŸºç¡€æ•™ç¨‹

#### ç›®å½•ç»“æ„

1. é¡¹ç›®ç›®å½•ç»“æ„
2. ç¼–è¯‘é…ç½® `config/`
3. æºç ç»„ç»‡ `src/`
4. é¡¹ç›®é…ç½® `project.config.json`
5. Babel é…ç½® `babel.config.js`
6. ESLint é…ç½® `.eslintrc `

<!-- todoï¼šåé¢äº†è§£ -->

#### é…ç½®

1. ç¼–è¯‘é…ç½®
2. è®¾è®¡ç¨¿åŠå°ºå¯¸å•ä½
3. å…¨å±€é…ç½®
4. é¡µé¢é…ç½®
5. é¡¹ç›®é…ç½®
6. Babel é…ç½®

<!-- todoï¼šåé¢äº†è§£ -->

#### Vue 3

Taro å¯ä»¥ä½¿ç”¨ Vue 3 è¿›è¡Œå¼€å‘ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ taro init å‘½ä»¤åˆ›å»º Vue3 çš„æ¨¡ç‰ˆï¼ŒåŒ…æ‹¬ defaultã€ vuex ä»¥åŠ NutUI 3.0 ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ NutUI 3.0 æ¨¡ç‰ˆè¿›è¡Œå¼€å‘ã€‚

ä¼ é€é—¨ï¼š[Vue 3 æ–‡æ¡£å­¦ä¹ ](./211001.md)

#### è·¯ç”±åŠŸèƒ½

å¦‚ä½•åœ¨ Taro ä¸­é…ç½®è·¯ç”±ã€å®ç°è·¯ç”±è·³è½¬å’Œä¼ å‚ç­‰é—®é¢˜ã€‚

##### è·¯ç”±é…ç½®

è¯´æ˜ï¼š

1. Taro æ²¡æœ‰å®ç°æµè§ˆå™¨çš„ history APIï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ react-routerã€vue-router ç­‰è·¯ç”±åº“
2. Taro éµå¾ªå°ç¨‹åºçš„è·¯ç”±è§„èŒƒï¼šåªéœ€è¦ä¿®æ”¹å…¨å±€é…ç½®çš„ `pages` å±æ€§ï¼ˆ`app.config.ts`ï¼‰ï¼Œé…ç½®ä¸º Taro åº”ç”¨ä¸­æ¯ä¸ªé¡µé¢çš„è·¯å¾„å³å¯

##### è·¯ç”±è·³è½¬

å¯ä»¥é€šè¿‡ Taro æä¾›çš„ API æ¥è·³è½¬åˆ°ç›®çš„é¡µé¢ï¼Œè¯¦æƒ…è§å®˜ç½‘ [Taro\.navigateTo\(option\) \| Taro æ–‡æ¡£](https://docs.taro.zone/docs/apis/route/navigateTo)

```js
// è·³è½¬åˆ°ç›®çš„é¡µé¢ï¼Œæ‰“å¼€æ–°é¡µé¢
Taro.navigateTo({
  url: '/pages/page/path/name'
})

// è·³è½¬åˆ°ç›®çš„é¡µé¢ï¼Œåœ¨å½“å‰é¡µé¢æ‰“å¼€
Taro.redirectTo({
  url: '/pages/page/path/name'
})
```

##### è·¯ç”±ä¼ å‚

å¯ä»¥é€šè¿‡åœ¨æ‰€æœ‰è·³è½¬çš„ `url` åé¢æ·»åŠ æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°è¿›è¡Œè·³è½¬ä¼ å‚ï¼š

```js
// ä¼ å…¥å‚æ•° id=2&type=test
Taro.navigateTo({
  url: '/pages/page/path/name?id=2&type=test'
})
```

##### è·å–è·¯ç”±å‚æ•°

è·³è½¬æˆåŠŸåï¼Œåœ¨ç›®æ ‡é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œå¯ä»¥é€šè¿‡ `Taro.getCurrentInstance().router.params` è·å–è·¯ç”±å‚æ•°ï¼š

```html
<template>
  <view className='index' />
</template>

<script>
import Taro from '@tarojs/taro'

export default {
  created () {
    // å»ºè®®åœ¨é¡µé¢åˆå§‹åŒ–æ—¶æŠŠ getCurrentInstance() çš„ç»“æœä¿å­˜ä¸‹æ¥ä¾›åé¢ä½¿ç”¨ï¼Œ
    // è€Œä¸æ˜¯é¢‘ç¹åœ°è°ƒç”¨æ­¤ API
    this.$instance = Taro.getCurrentInstance()
  },
  mounted () {
    // è·å–è·¯ç”±å‚æ•°
    console.log(this.$instance.router.params) // è¾“å‡º { id: 2, type: 'test' }
  }
}
</script>
```

#### é™æ€èµ„æºå¼•ç”¨

#### H5

#### å¤šç«¯å¼€å‘

#### CLI å‘½ä»¤

#### ä½¿ç”¨ HTML æ ‡ç­¾
