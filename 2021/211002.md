# 使用 Taro 3 开发企微小程序

## 1. 环境准备

检查 node 环境是否 >= 12

```sh
nvm use v12
node -v
npm -v
yarn -v
taro -v
```

## 2. 项目初始化

```sh
taro init hello-taro-qywx
```

说明：

1. 是否使用 TS —— yes
2. 使用 CSS 预处理器 —— Sass
3. 选择模板 —— 默认模板

## 3. 配置企微编译支持

```sh
yarn add @tarojs/plugin-platform-weapp-qy
```

```js
// config/index.js
config = {
  // ...
  plugins: [
    '@tarojs/plugin-platform-weapp-qy'
  ]
}
```

```json
// package.json
"scripts": {
    "build:qywx": "taro build --type qywx",
    "dev:qywx": "npm run build:qywx -- --watch",
  },
```

## 4. 测试运行

```sh
npm run dev:qywx
```

使用微信开发者工具，导入项目：

1. 进入 `hello-taro-qywx`目录
2. 选择 `dist` 目录打开

打开后：

1. 顶部栏选择“企微微信小程序模式”
2. 右上角“详情 -> 本地设置”：
   1. 设置关闭 ES6 转 ES5 功能，开启可能报错
   2. 设置关闭上传代码时样式自动补全，开启可能报错
   3. 设置关闭代码压缩上传，开启可能报错

